<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .admin-container {
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }
        .admin-header {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 20px;
        }
        .user-count {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #b0e8b0;
            margin-bottom: 20px;
        }
        .user-list {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .user-card {
            border-bottom: 1px solid #555;
            padding: 15px 0;
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.5s ease-in-out;
        }
        .user-card:last-child {
            border-bottom: none;
        }
        .user-info {
            font-size: 14px;
            margin-bottom: 5px;
        }
        .user-info strong {
            color: #8cc88c;
        }
        .no-users {
            text-align: center;
            font-style: italic;
            color: #999;
        }
    </style>
</head>
<body>

<div class="admin-container">
    <h1 class="admin-header">Admin Panel</h1>
    <p class="user-count">Total Users: <span id="userCount">0</span></p>
    <div class="user-list">
        <h2>User Information</h2>
        <div id="usersContainer">
            <p class="no-users">Loading users...</p>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script>
    // আপনার Firebase কনফিগারেশন এখানে
    const firebaseConfig = {
      apiKey: "AIzaSyDmJ8wsK6sYlRX2DWYTFmxwZONCL9nsmos",
      authDomain: "ensen-mining-bd-4882b.firebaseapp.com",
      projectId: "ensen-mining-bd-4882b",
      storageBucket: "ensen-mining-bd-4882b.firebasestorage.app",
      messagingSenderId: "1006758844776",
      appId: "1:1006758844776:web:df590613a79e1e9eed1edd",
      measurementId: "G-8YKDVM1W8B"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function fetchUsers() {
        const usersContainer = document.getElementById('usersContainer');
        const userCountElement = document.getElementById('userCount');
        
        usersContainer.innerHTML = '<p class="no-users">Loading users...</p>';

        try {
            const usersSnapshot = await db.collection('users').get();
            const userCount = usersSnapshot.size;
            userCountElement.textContent = userCount;

            if (usersSnapshot.empty) {
                usersContainer.innerHTML = '<p class="no-users">No users found.</p>';
                return;
            }
            
            usersContainer.innerHTML = '';
            usersSnapshot.forEach(doc => {
                const userData = doc.data();
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.innerHTML = `
                    <div class="user-info"><strong>Username:</strong> ${userData.username}</div>
                    <div class="user-info"><strong>Phone:</strong> ${userData.phone}</div>
                    <div class="user-info"><strong>Balance:</strong> ${userData.balance.toFixed(2)} BDT</div>
                `;
                usersContainer.appendChild(userCard);
            });
        } catch (error) {
            console.error("Error fetching users: ", error);
            usersContainer.innerHTML = `<p class="no-users">Error loading users. Check the console for details.</p>`;
        }
    }

    fetchUsers();

</script>

</body>
</html>
