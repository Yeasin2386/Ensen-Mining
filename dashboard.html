<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<div class="container">
    <div class="header">
        <div class="welcome-text">
            <span>üëã</span>
            <span id="welcomeMessage"></span>
        </div>
        <div class="balance-card">
            <div class="balance-label">Your Current Balance</div>
            <div class="balance-amount">
                <span id="userBalance">0.00</span>
                <span class="balance-unit">BDT</span>
            </div>
        </div>
    </div>
</div>

<nav class="navbar">
    <a href="#" class="nav-item active">
        <i class="fas fa-home"></i>
        <span>‡¶π‡ßã‡¶Æ</span>
    </a>
    <a href="#" class="nav-item">
        <i class="fas fa-tasks"></i>
        <span>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span>
    </a>
    <a href="#" class="nav-item">
        <i class="fas fa-coins"></i>
        <span>‡¶Ü‡¶∞‡ßç‡¶®‡¶ø‡¶Ç</span>
    </a>
    <a href="#" class="nav-item">
        <i class="fas fa-users"></i>
        <span>‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</span>
    </a>
    <a href="#" class="nav-item">
        <i class="fas fa-user-circle"></i>
        <span>‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
    </a>
</nav>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script>
    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá
    const firebaseConfig = {
      apiKey: "AIzaSyDmJ8wsK6sYlRX2DWYTFmxwZONCL9nsmos",
      authDomain: "ensen-mining-bd-4882b.firebaseapp.com",
      projectId: "ensen-mining-bd-4882b",
      storageBucket: "ensen-mining-bd-4882b.firebasestorage.app",
      messagingSenderId: "1006758844776",
      appId: "1:1006758844776:web:df590613a79e1e9eed1edd",
      measurementId: "G-8YKDVM1W8B"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function loadDashboard() {
        const username = localStorage.getItem('username');
        if (!username) {
            window.location.href = "index.html"; // ‡¶Ø‡¶¶‡¶ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®
            return;
        }

        const welcomeMessage = document.getElementById('welcomeMessage');
        welcomeMessage.textContent = username;

        const userDoc = await db.collection('users').doc(username).get();
        if (userDoc.exists) {
            const userData = userDoc.data();
            document.getElementById('userBalance').textContent = userData.balance.toFixed(2);
        }
    }

    loadDashboard();
</script>

</body>
</html>
