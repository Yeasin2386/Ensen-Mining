<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sleek Mini App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-color: #2c2c2c;
            --text-color: #f0f0f0;
            --secondary-text-color: #b0b0b0;
            --accent-color: #00d68f;
            --button-color: #00d68f;
            --button-text-color: #1a1a1a;
            --border-color: #444;
            --telegram-color: #0088cc;
            --whatsapp-color: #25D366;
            --gmail-color: #EA4335;
            --instagram-color: #E1306C;
            --facebook-color: #1877F2;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(200deg, #1b263b, #0d1b2a, #1a1a1a);
            background-size: 400% 400%;
            animation: gradientBG 20s ease infinite;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .container {
            max-width: 500px;
            width: 100%;
            margin: auto;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            flex-grow: 1;
            padding-bottom: 80px;
        }
        .header {
            text-align: center;
            margin-bottom: 25px;
            animation: slideInDown 0.6s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .header .back-btn {
            position: absolute;
            left: 0;
            font-size: 1.5em;
            color: var(--secondary-text-color);
            cursor: pointer;
            transition: color 0.3s;
        }
        .header .back-btn:hover {
            color: #fff;
        }
        h2 {
            color: #fff;
            margin: 0;
            flex-grow: 1;
        }
        .balance-card {
            background: var(--card-color);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 4px solid var(--accent-color);
            animation: fadeInScale 0.8s ease-out;
        }
        .balance-info {
            text-align: left;
        }
        .balance-text {
            font-size: 0.9em;
            color: var(--secondary-text-color);
            margin: 0;
        }
        .balance-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--accent-color);
            margin: 5px 0 0 0;
            letter-spacing: 1px;
        }
        .balance-icon {
            font-size: 2.5em;
            color: var(--border-color);
        }
        .button {
            display: block;
            width: 100%;
            padding: 18px;
            margin-top: 25px;
            background-color: var(--button-color);
            color: var(--button-text-color);
            text-decoration: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .button:hover {
            background-color: #00b377;
        }
        .button:active {
            transform: scale(0.98);
        }
        #telegram-link {
            background-color: var(--telegram-color);
            color: #fff;
            padding: 10px;
            border-radius: 8px;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: background-color 0.3s;
            margin-bottom: 20px;
        }
        #telegram-link:hover {
            background-color: #006699;
        }
        #telegram-link i {
            margin-right: 10px;
        }
        .nav-bar {
            background-color: var(--card-color);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.5);
            border-radius: 15px 15px 0 0;
            z-index: 100;
        }
        .nav-item {
            text-align: center;
            color: var(--secondary-text-color);
            font-size: 0.8em;
            text-decoration: none;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s ease;
        }
        .nav-item i {
            font-size: 1.5em;
            margin-bottom: 5px;
            display: block;
        }
        .nav-item.active {
            color: var(--accent-color);
            font-weight: bold;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .content-section.active {
            display: block;
        }
        .task-list-item, .settings-list .list-item {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            background-color: var(--card-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            text-align: left;
            transition: border-left 0.3s ease;
            border-left: 3px solid transparent;
            animation: slideInUp 0.5s ease-out;
        }
        .task-list-item:hover, .settings-list .list-item:hover {
            border-left: 3px solid var(--accent-color);
        }
        .task-info h4, .settings-list .list-item h4 {
            margin: 0;
            flex-grow: 1;
        }
        .task-list-item .task-icon {
            font-size: 1.5em;
            width: 25px;
            text-align: center;
        }
        .task-list-item .whatsapp-icon { color: var(--whatsapp-color); }
        .task-list-item .gmail-icon { color: var(--gmail-color); }
        .task-list-item .instagram-icon { color: var(--instagram-color); }
        .task-list-item .facebook-icon { color: var(--facebook-color); }
        .task-list-item .ad-icon { color: var(--accent-color); }

        .settings-list .list-item i {
            color: var(--accent-color);
            font-size: 1.5em;
        }
        .sub-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            margin-top: 20px;
        }
        .sub-content.active {
            display: block;
        }
        .sub-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .sub-header h3 {
            margin: 0;
            color: #fff;
        }
        .whatsapp-tutorial {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .whatsapp-tutorial .video-placeholder {
            width: 100%;
            height: 200px;
            background-color: #333;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--secondary-text-color);
            font-size: 1.2em;
        }
        .whatsapp-tutorial .step-text {
            color: var(--secondary-text-color);
            text-align: left;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .whatsapp-tutorial .binding-section {
            background-color: #333;
            padding: 15px;
            border-radius: 8px;
            text-align: left;
            margin-top: 15px;
        }
        .whatsapp-tutorial .binding-section h4 {
            margin-top: 0;
            color: var(--accent-color);
        }
        .whatsapp-tutorial .phone-input-group {
            display: flex;
            gap: 10px;
        }
        .whatsapp-tutorial .phone-input-group input {
            flex-grow: 1;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: #222;
            color: var(--text-color);
        }
        .whatsapp-tutorial .phone-input-group span {
            padding: 10px;
            background-color: var(--border-color);
            border-radius: 5px;
            color: var(--secondary-text-color);
        }
        .whatsapp-tutorial .verification-code-group {
            display: flex;
            justify-content: space-between;
            gap: 5px;
            margin-top: 15px;
        }
        .whatsapp-tutorial .verification-code-group input {
            width: 50px;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: #222;
            color: var(--text-color);
            font-size: 1.1em;
        }
        .whatsapp-tutorial .status-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
            text-align: left;
        }
        .whatsapp-tutorial .status-table th, .whatsapp-tutorial .status-table td {
            border: 1px solid var(--border-color);
            padding: 10px;
            color: var(--secondary-text-color);
        }
        .whatsapp-tutorial .status-table th {
            background-color: var(--border-color);
            color: #fff;
        }
        .task-button {
            background-color: var(--accent-color);
            color: var(--button-text-color);
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease;
            white-space: nowrap;
        }
        .task-button:hover {
            background-color: #00b377;
        }
        .task-button.loading {
            background-color: #555;
            cursor: not-allowed;
        }
        .earnings-history-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }
        .earnings-history-list li {
            background-color: var(--card-color);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .earnings-history-list li .earning-item {
            color: var(--secondary-text-color);
        }
        .earnings-history-list li .earning-value {
            font-weight: bold;
            color: var(--accent-color);
        }
        .rates-list-card {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            margin-bottom: 25px;
            animation: fadeIn 0.8s ease-out;
        }
        .rates-list-card h3 {
            margin: 0 0 15px 0;
            color: #fff;
            font-size: 1.2em;
        }
        .rate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        .rate-item:last-child {
            border-bottom: none;
        }
        .rate-item .label {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--secondary-text-color);
        }
        .rate-item .label i {
            color: var(--accent-color);
        }
        .rate-item .value {
            font-weight: bold;
            color: var(--text-color);
        }
        .input-group {
            text-align: left;
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--secondary-text-color);
            font-size: 0.9em;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background-color: var(--card-color);
            color: var(--text-color);
            font-size: 1em;
            box-sizing: border-box;
        }
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        /* Profile and Password Change Specific Styles */
        .profile-card, .password-card {
            background-color: var(--card-color);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            text-align: left;
        }
        .profile-info-item, .password-info-item {
            margin-bottom: 15px;
        }
        .profile-info-item label, .password-info-item label {
            font-weight: bold;
            color: var(--accent-color);
            display: block;
            margin-bottom: 5px;
        }
        .profile-info-item span, .password-info-item span {
            color: var(--text-color);
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="registration-screen">
        <div id="registration-form">
            <h3>Complete your Profile</h3>
            <div class="input-group">
                <label for="reg-username">Username</label>
                <input type="text" id="reg-username" placeholder="Enter your username">
            </div>
            <div class="input-group">
                <label for="reg-nickname">Nickname</label>
                <input type="text" id="reg-nickname" placeholder="Enter your nickname">
            </div>
            <div class="input-group">
                <label for="reg-phone">Phone Number</label>
                <input type="tel" id="reg-phone" placeholder="Enter your phone number">
            </div>
            <div class="input-group">
                <label for="reg-password">Transaction Password</label>
                <input type="password" id="reg-password" placeholder="Set a password for transactions">
            </div>
            <button class="button" onclick="registerUser()">Register</button>
        </div>
    </div>

    <div id="main-app" style="display: none;">
        <div class="container">
            
            <div id="home" class="content-section active">
                <div class="header">
                    <h2>Welcome, <span id="welcome-nickname"></span></h2>
                </div>
                
                <a id="telegram-link" href="https://t.me/your_telegram_channel" target="_blank">
                    <i class="fab fa-telegram-plane"></i> Join Our Telegram Channel
                </a>

                <div class="balance-card">
                    <div class="balance-info">
                        <p class="balance-text">Your Current Balance</p>
                        <h1 class="balance-value" id="balanceDisplay">0 BDT</h1>
                    </div>
                    <i class="fas fa-wallet balance-icon"></i>
                </div>
                
                <div class="rates-list-card">
                    <h3>Today's Rates</h3>
                    <div class="rate-item">
                        <div class="label">
                            <i class="fas fa-envelope"></i>
                            <span>Gmail Account</span>
                        </div>
                        <div class="value" id="gmailRate">500 BDT</div>
                    </div>
                    <div class="rate-item">
                        <div class="label">
                            <i class="fab fa-instagram"></i>
                            <span>Instagram Account</span>
                        </div>
                        <div class="value" id="instagramRate">300 BDT</div>
                    </div>
                    <div class="rate-item">
                        <div class="label">
                            <i class="fas fa-ad"></i>
                            <span>Per Ad View</span>
                        </div>
                        <div class="value" id="adRate">50 BDT</div>
                    </div>
                </div>

                <button class="button" onclick="dailyCheckin()">Daily Check-in</button>
            </div>

            <div id="tasks" class="content-section">
                <div class="header">
                    <h2>Tasks</h2>
                </div>
                <div class="task-list-item">
                    <i class="fas fa-ad task-icon ad-icon"></i>
                    <div class="task-info">
                        <h4>Watch Ads</h4>
                        <p>Watch short video ads to earn <span id="adTaskRate">50</span> BDT.</p>
                    </div>
                    <button class="task-button" onclick="completeTask('ads')">Watch Ad</button>
                </div>
                <div class="task-list-item" onclick="openExternalLink('https://www.facebook.com/your-page', 'facebook')">
                    <i class="fab fa-facebook-f task-icon facebook-icon"></i>
                    <div class="task-info">
                        <h4>Follow on Facebook</h4>
                        <p>Follow our page for 30 BDT.</p>
                    </div>
                    <button class="task-button">Complete</button>
                </div>
                <div class="task-list-item" onclick="openExternalLink('https://www.instagram.com/your-page', 'instagram')">
                    <i class="fab fa-instagram task-icon instagram-icon"></i>
                    <div class="task-info">
                        <h4>Follow on Instagram</h4>
                        <p>Follow our account for 25 BDT.</p>
                    </div>
                    <button class="task-button">Complete</button>
                </div>
            </div>

            <div id="extra-earning" class="content-section">
                <div class="header">
                    <h2>Extra Earning</h2>
                </div>
                
                <div class="task-list-item" onclick="showWhatsAppTask()">
                    <i class="fab fa-whatsapp task-icon whatsapp-icon"></i>
                    <div class="task-info">
                        <h4>Connect WhatsApp</h4>
                        <p>Connect your WhatsApp number to earn 200 BDT.</p>
                    </div>
                    <button class="task-button" onclick="event.stopPropagation(); showWhatsAppTask();">Go</button>
                </div>
                <div class="task-list-item" onclick="showSocialMediaTask('gmail')">
                    <i class="fas fa-envelope task-icon gmail-icon"></i>
                    <div class="task-info">
                        <h4>Sell Gmail Account</h4>
                        <p>Sell your Gmail account for <span id="gmailTaskRate">500</span> BDT.</p>
                    </div>
                    <button class="task-button" onclick="event.stopPropagation(); showSocialMediaTask('gmail');">Sell</button>
                </div>
                <div class="task-list-item" onclick="showSocialMediaTask('instagram')">
                    <i class="fab fa-instagram task-icon instagram-icon"></i>
                    <div class="task-info">
                        <h4>Sell Instagram Account</h4>
                        <p>Sell your Instagram account for <span id="instagramTaskRate">300</span> BDT.</p>
                    </div>
                    <button class="task-button" onclick="event.stopPropagation(); showSocialMediaTask('instagram');">Sell</button>
                </div>


                <div id="whatsapp-task" class="sub-content">
                    <div class="sub-header">
                        <h3>Connect WhatsApp</h3>
                    </div>
                    <div class="whatsapp-tutorial">
                        <div class="video-placeholder">
                            Tutorial Video
                            <i class="fas fa-play" style="margin-left: 10px;"></i>
                        </div>
                        <div class="step-text">
                            **Step 1:** Click to download whatsapp
                            <br>
                            <a href="https://www.whatsapp.com" target="_blank" style="color: var(--accent-color);">Click to jump https://www.whatsapp.com</a>
                        </div>
                        <div class="step-text">
                            **Step 2:** Connect WhatsApp
                            <br>
                            After completing the registration, continue with the following binding steps
                        </div>
                        <div class="binding-section">
                            <i class="fab fa-whatsapp" style="color: var(--accent-color);"></i> Bind WhatsApp
                            <div id="whatsapp-phone-section">
                                <p style="font-size: 0.8em; margin-top: 10px; color: var(--secondary-text-color);">Enter the verification code into the associated WhatsApp account</p>
                                <p style="font-size: 0.8em; color: #ff5555;">Only active WhatsApp Mobile users can claim tasks</p>
                                <div class="phone-input-group">
                                    <span>+880</span>
                                    <input type="tel" id="whatsapp-phone" placeholder="Please enter your phone number">
                                </div>
                                <button class="button" id="get-code-btn" style="margin-top: 15px;" onclick="getVerificationCode()">Get verification code</button>
                            </div>
                            <div id="whatsapp-verify-section" style="display: none;">
                                <p style="font-size: 0.8em; margin-top: 10px; color: #ff5555;">After getting the verification code, do not refresh the page</p>
                                <div class="verification-code-group">
                                    <input type="text" maxlength="1">
                                    <input type="text" maxlength="1">
                                    <input type="text" maxlength="1">
                                    <input type="text" maxlength="1">
                                    <input type="text" maxlength="1">
                                    <input type="text" maxlength="1">
                                </div>
                                <button class="button" style="margin-top: 15px;" onclick="completeTask('whatsapp')">Submit Code</button>
                            </div>
                            <p style="font-size: 0.8em; margin-top: 20px; color: var(--secondary-text-color);">After entering the verification code in WhatsApp, please make sure the link is successful and then return to the platform to refresh. The account binding status will be displayed below</p>
                            <table class="status-table">
                                <thead>
                                    <tr>
                                        <th>WhatsApp number</th>
                                        <th>Online status</th>
                                        <th>Operation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="3" style="text-align: center;">No data yet</td>
                                    </tr>
                                </tbody>
                            </table>
                            <i class="fas fa-sync" style="float: right; margin-top: 10px; cursor: pointer; color: var(--accent-color);"></i>
                        </div>
                    </div>
                </div>

                <div id="social-media-task" class="sub-content">
                    <div class="sub-header">
                        <h3>Sell Social Media Account</h3>
                    </div>
                    <p style="text-align:center; color:var(--secondary-text-color);">Please submit your account details to the admin on Telegram to complete the sale.</p>
                </div>
            </div>

            <div id="referral" class="content-section">
                <div class="header">
                    <h2>Referral System</h2>
                </div>
                <div class="balance-card">
                    <div class="balance-info">
                        <p class="balance-text">Total Referrals</p>
                        <h1 class="balance-value" id="totalReferrals">0</h1>
                    </div>
                    <i class="fas fa-share-alt balance-icon"></i>
                </div>
                <p style="margin-top: -15px; color:var(--secondary-text-color);">Earn 100 BDT for each new referral.</p>
                <div class="task-list-item" style="border-left: 3px solid var(--border-color);">
                    <div class="task-info">
                        <h4>Your Referral Link</h4>
                        <p id="referralLink">https://your-mini-app-url.vercel.app/?ref=USER_ID</p>
                    </div>
                    <button class="task-button" onclick="copyLink()" style="background-color: var(--secondary-button-color);">Copy Link</button>
                </div>
            </div>

            <div id="settings" class="content-section">
                <div class="header">
                    <h2>Settings</h2>
                </div>
                <div class="settings-list">
                    <div class="list-item" onclick="showSubSection('profile-page')">
                        <i class="fas fa-user"></i>
                        <h4>Profile</h4>
                    </div>
                    <div class="list-item" onclick="showSubSection('withdraw-page')">
                        <i class="fas fa-wallet"></i>
                        <h4>Withdraw</h4>
                    </div>
                    <div class="list-item" onclick="showSubSection('history-page')">
                        <i class="fas fa-history"></i>
                        <h4>Withdrawal History</h4>
                    </div>
                    <div class="list-item" onclick="showSubSection('earnings-history-page')">
                        <i class="fas fa-chart-line"></i>
                        <h4>Earnings Report</h4>
                    </div>
                    <div class="list-item" onclick="showSubSection('change-password-page')">
                        <i class="fas fa-lock"></i>
                        <h4>Change Transaction Password</h4>
                    </div>
                </div>
            </div>

            <div id="profile-page" class="content-section">
                <div class="header">
                    <i class="fas fa-arrow-left back-btn" onclick="showSection('settings')"></i>
                    <h2>Profile</h2>
                </div>
                <div class="profile-card">
                    <div class="profile-info-item">
                        <label>Username:</label>
                        <span id="profileUsername"></span>
                    </div>
                    <div class="profile-info-item">
                        <label>Nickname:</label>
                        <span id="profileNickname"></span>
                    </div>
                    <div class="profile-info-item">
                        <label>Phone Number:</label>
                        <span id="profilePhoneNumber"></span>
                    </div>
                </div>
            </div>

            <div id="withdraw-page" class="content-section">
                <div class="header">
                    <i class="fas fa-arrow-left back-btn" onclick="showSection('settings')"></i>
                    <h2>Withdraw Your BDT</h2>
                </div>
                <div class="input-group">
                    <label for="amount">Enter Amount (BDT)</label>
                    <input type="number" id="amount" placeholder="e.g. 5000">
                </div>
                <div class="input-group">
                    <label for="method">Select Method</label>
                    <select id="method">
                        <option value="bkash">bKash</option>
                        <option value="binance">Binance</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="account">bKash/Binance Account</label>
                    <input type="text" id="account" placeholder="Enter your number/ID">
                </div>
                <div class="input-group">
                    <label for="transaction-password">Transaction Password</label>
                    <input type="password" id="transaction-password" placeholder="Enter your password">
                </div>
                <button class="button" onclick="requestWithdraw()">Request Withdraw</button>
            </div>

            <div id="history-page" class="content-section">
                <div class="header">
                    <i class="fas fa-arrow-left back-btn" onclick="showSection('settings')"></i>
                    <h2>Withdrawal History</h2>
                </div>
                <p style="color: var(--secondary-text-color);">No history available yet.</p>
            </div>

            <div id="earnings-history-page" class="content-section">
                <div class="header">
                    <i class="fas fa-arrow-left back-btn" onclick="showSection('settings')"></i>
                    <h2>Earnings Report</h2>
                </div>
                <ul class="earnings-history-list">
                    <li>
                        <span class="earning-item">Total Ads Watched:</span>
                        <span class="earning-value" id="adsWatchedCount">0</span>
                    </li>
                    <li>
                        <span class="earning-item">Accounts Sold:</span>
                        <span class="earning-value" id="accountsSoldCount">0</span>
                    </li>
                    <li>
                        <span class="earning-item">Total Task Earnings:</span>
                        <span class="earning-value" id="taskEarnings">0 BDT</span>
                    </li>
                </ul>
            </div>
            
            <div id="change-password-page" class="content-section">
                <div class="header">
                    <i class="fas fa-arrow-left back-btn" onclick="showSection('settings')"></i>
                    <h2>Change Transaction Password</h2>
                </div>
                <div class="password-card">
                    <div class="input-group">
                        <label for="old-password">Old Password</label>
                        <input type="password" id="old-password" placeholder="Enter old password">
                    </div>
                    <div class="input-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" placeholder="Enter new password">
                    </div>
                    <div class="input-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm new password">
                    </div>
                    <button class="button" onclick="changeTransactionPassword()">Change Password</button>
                </div>
            </div>
        </div>

        <div class="nav-bar">
            <a class="nav-item active" onclick="showSection('home', this)">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a class="nav-item" onclick="showSection('tasks', this)">
                <i class="fas fa-tasks"></i>
                <span>Tasks</span>
            </a>
            <a class="nav-item" onclick="showSection('extra-earning', this)">
                <i class="fas fa-coins"></i>
                <span>Extra Earning</span>
            </a>
            <a class="nav-item" onclick="showSection('referral', this)">
                <i class="fas fa-share-alt"></i>
                <span>Referral</span>
            </a>
            <a class="nav-item" onclick="showSection('settings', this)">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </div>
    </div>

    <script>
        const GMAIL_RATE = 500;
        const INSTAGRAM_RATE = 300;
        const AD_RATE = 50;
        const DAILY_CHECKIN_BDT = 50;
        const FB_FOLLOW_RATE = 30;
        const INSTA_JOIN_RATE = 25;
        const DAILY_CHECKIN_CODE = "TELEGRAM_CODE123";
        const FB_CODE = "FB123";
        const INSTA_CODE = "IG123";

        let balance = 0;
        let username = "";
        let nickname = "";
        let phoneNumber = "";
        let transactionPassword = "";
        let totalReferrals = 0;
        let adsWatched = 0;
        let accountsSold = 0;
        let taskEarnings = 0;

        function loadData() {
            const userData = JSON.parse(localStorage.getItem('userData'));
            if (userData) {
                username = userData.username;
                nickname = userData.nickname;
                phoneNumber = userData.phoneNumber;
                transactionPassword = userData.transactionPassword;

                balance = 1500;
                totalReferrals = 12;
                adsWatched = 15;
                accountsSold = 2;
                taskEarnings = 15 * AD_RATE + 2 * GMAIL_RATE;

                document.getElementById('registration-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                updateUI();
            } else {
                document.getElementById('registration-screen').style.display = 'flex';
                document.getElementById('main-app').style.display = 'none';
            }
        }

        function registerUser() {
            const regUsername = document.getElementById('reg-username').value;
            const regNickname = document.getElementById('reg-nickname').value;
            const regPhone = document.getElementById('reg-phone').value;
            const regPassword = document.getElementById('reg-password').value;

            if (regUsername && regNickname && regPhone && regPassword) {
                const userData = {
                    username: regUsername,
                    nickname: regNickname,
                    phoneNumber: regPhone,
                    transactionPassword: regPassword
                };
                localStorage.setItem('userData', JSON.stringify(userData));
                loadData();
            } else {
                alert("Please fill in all the details.");
            }
        }
        
        function updateUI() {
            document.getElementById('welcome-nickname').textContent = nickname;
            document.getElementById('balanceDisplay').textContent = balance.toLocaleString() + ' BDT';
            
            document.getElementById('gmailRate').textContent = GMAIL_RATE + ' BDT';
            document.getElementById('instagramRate').textContent = INSTAGRAM_RATE + ' BDT';
            document.getElementById('adRate').textContent = AD_RATE + ' BDT';

            document.getElementById('adTaskRate').textContent = AD_RATE;
            document.getElementById('profileUsername').textContent = username;
            document.getElementById('profileNickname').textContent = nickname;
            document.getElementById('profilePhoneNumber').textContent = phoneNumber;
            document.getElementById('totalReferrals').textContent = totalReferrals;
            
            // Update Earnings Report
            document.getElementById('adsWatchedCount').textContent = adsWatched;
            document.getElementById('accountsSoldCount').textContent = accountsSold;
            document.getElementById('taskEarnings').textContent = taskEarnings.toLocaleString() + ' BDT';
        }

        function showSection(sectionId, element) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }
        }

        function showSubSection(subId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(subId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            
            // Find and activate the parent nav item (Settings)
            const settingsNav = document.querySelector('.nav-item[onclick*="showSection(\'settings\')"]');
            if (settingsNav) {
                settingsNav.classList.add('active');
            }
        }
        
        function showWhatsAppTask() {
            // This function is for internal sub-pages within a section, not full section change
            document.querySelectorAll('#extra-earning .sub-content').forEach(sub => sub.classList.remove('active'));
            document.getElementById('whatsapp-task').classList.add('active');
        }

        function showSocialMediaTask() {
            document.querySelectorAll('#extra-earning .sub-content').forEach(sub => sub.classList.remove('active'));
            document.getElementById('social-media-task').classList.add('active');
        }
        
        function getVerificationCode() {
            const phoneNumber = document.getElementById('whatsapp-phone').value;
            const getCodeBtn = document.getElementById('get-code-btn');

            if (phoneNumber) {
                getCodeBtn.textContent = 'Sending...';
                getCodeBtn.classList.add('loading');
                getCodeBtn.disabled = true;

                setTimeout(() => {
                    document.getElementById('whatsapp-phone-section').style.display = 'none';
                    document.getElementById('whatsapp-verify-section').style.display = 'block';
                    alert(`A verification code has been sent to ${phoneNumber}.`);
                    
                    getCodeBtn.textContent = 'Get verification code';
                    getCodeBtn.classList.remove('loading');
                    getCodeBtn.disabled = false;
                }, 2000);
            } else {
                alert("Please enter a valid phone number.");
            }
        }

        function changeTransactionPassword() {
            const oldPassword = document.getElementById('old-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (oldPassword === transactionPassword) {
                if (newPassword === confirmPassword) {
                    if (newPassword.length >= 4) { // Minimum password length check
                        transactionPassword = newPassword;
                        const userData = JSON.parse(localStorage.getItem('userData'));
                        userData.transactionPassword = newPassword;
                        localStorage.setItem('userData', JSON.stringify(userData));
                        alert("Transaction password changed successfully!");
                        document.getElementById('old-password').value = '';
                        document.getElementById('new-password').value = '';
                        document.getElementById('confirm-password').value = '';
                        showSection('settings');
                    } else {
                        alert("New password must be at least 4 characters long.");
                    }
                } else {
                    alert("New passwords do not match.");
                }
            } else {
                alert("Incorrect old password.");
            }
        }

        function dailyCheckin() {
            const userCode = prompt("Please enter the daily check-in code from our Telegram channel:");

            if (userCode === DAILY_CHECKIN_CODE) {
                balance += DAILY_CHECKIN_BDT;
                updateUI();
                alert(`You have received ${DAILY_CHECKIN_BDT} BDT for Daily Check-in!`);
            } else {
                alert("Invalid code. Please check our Telegram channel for the correct code.");
            }
        }

        function openExternalLink(url, taskName) {
            window.open(url, '_blank');
            
            setTimeout(() => {
                let code = '';
                if (taskName === 'facebook') {
                    code = prompt("Please enter the special code from the Facebook page to complete the task:");
                    if (code === FB_CODE) {
                        completeTask('facebook');
                    } else {
                        alert("Incorrect code. Task not completed.");
                    }
                } else if (taskName === 'instagram') {
                    code = prompt("Please enter the special code from the Instagram page to complete the task:");
                    if (code === INSTA_CODE) {
                        completeTask('instaJoin');
                    } else {
                        alert("Incorrect code. Task not completed.");
                    }
                }
            }, 3000);
        }

        function completeTask(taskName) {
            let bdt = 0;
            if (taskName === 'ads') {
                bdt = AD_RATE;
                adsWatched++;
                taskEarnings += bdt;
                alert(`You watched an ad and earned ${bdt} BDT.`);
            } else if (taskName === 'gmail') {
                bdt = GMAIL_RATE;
                accountsSold++;
                taskEarnings += bdt;
                alert(`You sold a Gmail account and earned ${bdt} BDT.`);
            } else if (taskName === 'whatsapp') {
                bdt = 200;
                taskEarnings += bdt;
                alert(`You connected your WhatsApp number and earned ${bdt} BDT.`);
            } else if (taskName === 'instagram') {
                bdt = INSTAGRAM_RATE;
                accountsSold++;
                taskEarnings += bdt;
                alert(`You sold an Instagram account and earned ${bdt} BDT.`);
            } else if (taskName === 'facebook') {
                bdt = FB_FOLLOW_RATE;
                taskEarnings += bdt;
                alert(`You followed on Facebook and earned ${bdt} BDT.`);
            } else if (taskName === 'instaJoin') {
                bdt = INSTA_JOIN_RATE;
                taskEarnings += bdt;
                alert(`You followed on Instagram and earned ${bdt} BDT.`);
            }
            balance += bdt;
            updateUI();
        }
        
        function requestWithdraw() {
            const amount = document.getElementById('amount').value;
            const method = document.getElementById('method').value;
            const account = document.getElementById('account').value;
            const password = document.getElementById('transaction-password').value;

            if (amount && method && account && password) {
                if (transactionPassword !== password) {
                    alert("Invalid transaction password.");
                    return;
                }
                if (parseInt(amount) > balance) {
                    alert("Not enough BDT to withdraw.");
                    return;
                }
                balance -= parseInt(amount);
                updateUI();
                alert(`Withdrawal request for ${amount} BDT via ${method} to ${account} has been submitted.`);
            } else {
                alert("Please fill in all the details.");
            }
        }

        function copyLink() {
            const referralLink = document.getElementById('referralLink');
            navigator.clipboard.writeText(referralLink.textContent)
                .then(() => alert('Referral link copied to clipboard!'))
                .catch(err => console.error('Failed to copy text: ', err));
        }

        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>