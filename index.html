<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earning App</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            text-align: center;
        }
        
        #registration-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        #registration-screen h2 {
            margin-bottom: 20px;
            color: #1a73e8;
        }

        .input-group {
            width: 100%;
            max-width: 300px;
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            text-align: left;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .button {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        .button:hover {
            background-color: #155bb5;
        }

        #main-app {
            display: none;
            flex: 1;
            flex-direction: column;
        }

        .header {
            background-color: #1a73e8;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 20px;
        }

        .header .user-info {
            display: flex;
            align-items: center;
        }

        .header .user-info p {
            margin: 0;
            font-size: 14px;
        }
        
        .header .user-info p span {
            font-weight: bold;
        }

        .balance-box {
            background-color: #fff;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .balance-box h3 {
            margin: 0 0 10px 0;
            color: #1a73e8;
        }

        .balance-box p {
            font-size: 2em;
            font-weight: bold;
            color: #4CAF50;
            margin: 0;
        }

        .main-content {
            padding: 20px;
            flex: 1;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .task-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .task-item {
            background-color: #fff;
            padding: 20px 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .task-item:hover {
            transform: translateY(-5px);
        }

        .task-item img {
            width: 40px;
            height: 40px;
            margin-bottom: 10px;
        }
        
        .task-item p {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
        }

        .task-item .rate {
            font-size: 12px;
            color: #888;
        }

        .profile-info {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: left;
        }
        
        .profile-info p {
            margin: 10px 0;
            font-size: 16px;
        }
        
        .profile-info p span {
            font-weight: bold;
            color: #1a73e8;
        }

        .referral-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .referral-section h4 {
            margin-top: 0;
        }

        .referral-link-box {
            background-color: #f1f1f1;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            word-wrap: break-word;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .referral-link-box button {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .withdrawal-form, .sell-account-form, .change-password-form, .whatsapp-form {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: left;
        }

        .withdrawal-form h4, .sell-account-form h4, .change-password-form h4, .whatsapp-form h4 {
            margin-top: 0;
            color: #1a73e8;
        }

        .sell-account-form label, .change-password-form label, .whatsapp-form label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .sell-account-form input, .sell-account-form select, .change-password-form input, .whatsapp-form input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: 5px;
        }

        .sell-account-form input[type="file"] {
            padding: 3px;
        }

        .checkbox-group {
            margin-top: 10px;
        }

        .message {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }

        .ads-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ad-item {
            background-color: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: left;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .ad-item .ad-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .ad-item .ad-icon {
            font-size: 24px;
            color: #1a73e8;
        }

        .ad-item .ad-text {
            display: flex;
            flex-direction: column;
        }
        
        .ad-item .ad-text p {
            margin: 0;
            font-size: 16px;
        }

        .ad-item .ad-text span {
            font-size: 14px;
            color: #888;
        }

        .ad-item .button {
            padding: 8px 15px;
            font-size: 14px;
            width: auto;
            max-width: none;
        }

        .footer {
            background-color: #fff;
            padding: 10px 0;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
            position: sticky;
            bottom: 0;
            width: 100%;
        }

        .nav-item {
            text-decoration: none;
            color: #888;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 12px;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #1a73e8;
        }

        .nav-item img {
            width: 24px;
            height: 24px;
            margin-bottom: 3px;
        }

    </style>
    <script src='//libtl.com/sdk.js' data-zone='9726155' data-sdk='show_9726155'></script>
</head>
<body>

<div id="registration-screen">
    <h2>Welcome</h2>
    <div class="input-group">
        <label for="reg-username">Username</label>
        <input type="text" id="reg-username" placeholder="Username">
    </div>
    <div class="input-group">
        <label for="reg-nickname">Nickname</label>
        <input type="text" id="reg-nickname" placeholder="Nickname">
    </div>
    <div class="input-group">
        <label for="reg-phone">Phone Number</label>
        <input type="tel" id="reg-phone" placeholder="01XXXXXXXXX">
    </div>
    <div class="input-group">
        <label for="reg-password">Transaction Password (6 digits)</label>
        <input type="password" id="reg-password" placeholder="6-digit password">
    </div>
    <button class="button" onclick="registerUser()">Register</button>
</div>

<div id="main-app">
    <div class="header">
        <h1>BD Earn</h1>
        <div class="user-info">
            <p>Welcome, <span id="welcome-nickname"></span></p>
        </div>
    </div>
    
    <div class="balance-box">
        <h3>Current Balance</h3>
        <p id="balanceDisplay">0 BDT</p>
    </div>

    <div class="main-content">
        <div id="home" class="content-section active">
            <h2 class="section-title">Home</h2>
            <div class="task-list">
                <div class="task-item" onclick="showSection('daily-earning')">
                    <img src="https://example.com/daily-earning-icon.png" alt="Daily Earning">
                    <p>Daily Earning</p>
                </div>
                <div class="task-item" onclick="showSection('extra-earning')">
                    <img src="https://example.com/extra-earning-icon.png" alt="Extra Earning">
                    <p>Extra Earning</p>
                </div>
                <div class="task-item" onclick="showSection('refer-earn')">
                    <img src="https://example.com/refer-earn-icon.png" alt="Refer & Earn">
                    <p>Refer & Earn</p>
                </div>
                <div class="task-item" onclick="showSection('profile')">
                    <img src="https://example.com/profile-icon.png" alt="Profile">
                    <p>Profile</p>
                </div>
                <div class="task-item" onclick="showSection('withdraw')">
                    <img src="https://example.com/withdraw-icon.png" alt="Withdraw">
                    <p>Withdraw</p>
                </div>
            </div>
        </div>

        <div id="daily-earning" class="content-section">
            <h2 class="section-title">Daily Earning Tasks</h2>
            <div class="ads-list">
                <div class="ad-item">
                    <div class="ad-info">
                        <span class="ad-icon">‚ñ∂Ô∏è</span>
                        <div class="ad-text">
                            <p>Watch Ads</p>
                            <span>Earn <span id="ad1Rate"></span> BDT</span>
                        </div>
                    </div>
                    <button class="button" onclick="showAd1()">Watch</button>
                </div>
                <div class="ad-item">
                    <div class="ad-info">
                        <span class="ad-icon">üì±</span>
                        <div class="ad-text">
                            <p>View a Popup Ad</p>
                            <span>Earn <span id="ad2Rate"></span> BDT</span>
                        </div>
                    </div>
                    <button class="button" onclick="showAd2()">View</button>
                </div>
                <div class="ad-item">
                    <div class="ad-info">
                        <span class="ad-icon">üñºÔ∏è</span>
                        <div class="ad-text">
                            <p>View a Banner Ad</p>
                            <span>Earn <span id="ad3Rate"></span> BDT</span>
                        </div>
                    </div>
                    <button class="button" onclick="showAd3()">View</button>
                </div>
                <div class="ad-item" onclick="dailyCheckin()">
                    <div class="ad-info">
                        <span class="ad-icon">‚úÖ</span>
                        <div class="ad-text">
                            <p>Daily Check-in</p>
                            <span>Earn 50 BDT</span>
                        </div>
                    </div>
                    <button class="button">Check In</button>
                </div>
            </div>
        </div>

        <div id="extra-earning" class="content-section">
            <h2 class="section-title">Extra Earning</h2>
            <div class="task-list">
                <div class="task-item" onclick="showSubSection('whatsapp-task')">
                    <img src="https://example.com/whatsapp-icon.png" alt="WhatsApp">
                    <p>WhatsApp Connect</p>
                </div>
                <div class="task-item" onclick="openExternalLink('https://www.facebook.com/your-page-link', 'facebook')">
                    <img src="https://example.com/facebook-icon.png" alt="Facebook">
                    <p>Follow on FB</p>
                </div>
                <div class="task-item" onclick="openExternalLink('https://www.instagram.com/your-profile-link', 'instagram')">
                    <img src="https://example.com/instagram-icon.png" alt="Instagram">
                    <p>Join on Insta</p>
                </div>
            </div>
        </div>

        <div id="whatsapp-task" class="content-section">
            <h2 class="section-title">WhatsApp Connect</h2>
            <div class="whatsapp-form">
                <h4>Connect Your WhatsApp Number</h4>
                <p>Connect your WhatsApp to our group and earn 200 BDT instantly!</p>
                <label for="whatsapp-phone">Enter Your WhatsApp Number</label>
                <input type="tel" id="whatsapp-phone" placeholder="01XXXXXXXXX">
                <button class="button" onclick="submitWhatsApp()">Submit Number</button>
                <p class="message" id="whatsapp-message"></p>
            </div>
        </div>

        <div id="sell-accounts" class="content-section">
            <h2 class="section-title">Sell Accounts</h2>
            <div class="sell-account-form">
                <h4>Sell Gmail Accounts</h4>
                <p>Sell your old Gmail accounts and earn <span id="gmailSellRate"></span> per account.</p>
                <label for="gmail-count">Number of Accounts</label>
                <input type="number" id="gmail-count" placeholder="Number of Gmails">
                <label for="gmail-file">Upload Accounts File</label>
                <input type="file" id="gmail-file">
                <div class="checkbox-group">
                    <input type="checkbox" id="password-sure">
                    <label for="password-sure">All accounts have a 6-digit transaction password.</label>
                </div>
                <button class="button" onclick="submitGmail()">Submit</button>
                <p class="message" id="gmail-message"></p>
            </div>
            
            <div class="sell-account-form" style="margin-top: 20px;">
                <h4>Sell Instagram Accounts</h4>
                <p>Sell your old Instagram accounts and earn <span id="instagramSellRate"></span> per account.</p>
                <label for="insta-count">Number of Accounts</label>
                <input type="number" id="insta-count" placeholder="Number of Instagrams">
                <label for="insta-file">Upload Accounts File</label>
                <input type="file" id="insta-file">
                <div class="checkbox-group">
                    <input type="checkbox" id="insta-password-sure">
                    <label for="insta-password-sure">All accounts have a 6-digit transaction password.</label>
                </div>
                <button class="button" onclick="submitInstagram()">Submit</button>
                <p class="message" id="instagram-message"></p>
            </div>
        </div>

        <div id="refer-earn" class="content-section">
            <h2 class="section-title">Refer & Earn</h2>
            <div class="referral-section">
                <h4>Your Referral Link</h4>
                <div class="referral-link-box" id="referralLink">
                    https://example.com/your-app-link?ref=user123
                </div>
                <button class="button" onclick="copyLink()">Copy Link</button>
                <p>Share your link with friends. You will earn 50 BDT for each referral who registers and completes their first task.</p>
                <p>Total Referrals: <span id="totalReferrals">0</span></p>
            </div>
        </div>

        <div id="profile" class="content-section">
            <h2 class="section-title">Profile</h2>
            <div class="profile-info">
                <h4>Account Details</h4>
                <p>Username: <span id="profileUsername"></span></p>
                <p>Nickname: <span id="profileNickname"></span></p>
                <p>Phone: <span id="profilePhoneNumber"></span></p>
            </div>
            
            <div class="profile-info" style="margin-top: 20px;">
                <h4>Earnings & Stats</h4>
                <p>Total Ads Watched: <span id="adsWatchedCount">0</span></p>
                <p>Accounts Sold: <span id="accountsSoldCount">0</span></p>
                <p>Total Task Earnings: <span id="taskEarnings">0 BDT</span></p>
            </div>

            <div class="change-password-form" style="margin-top: 20px;">
                <h4>Change Transaction Password</h4>
                <label for="old-password">Old Password</label>
                <input type="password" id="old-password" placeholder="6-digit old password">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" placeholder="6-digit new password">
                <label for="confirm-password">Confirm New Password</label>
                <input type="password" id="confirm-password" placeholder="Confirm new password">
                <button class="button" onclick="changeTransactionPassword()">Change Password</button>
            </div>
        </div>

        <div id="withdraw" class="content-section">
            <h2 class="section-title">Withdraw</h2>
            <div class="withdrawal-form">
                <h4>Withdraw Funds</h4>
                <label for="amount">Amount to Withdraw (BDT)</label>
                <input type="number" id="amount" placeholder="Minimum 500 BDT">
                <label for="method">Withdrawal Method</label>
                <select id="method">
                    <option value="bkash">Bkash</option>
                    <option value="nagad">Nagad</option>
                    <option value="rocket">Rocket</option>
                </select>
                <label for="account">Account Number</label>
                <input type="tel" id="account" placeholder="Your mobile account number">
                <label for="transaction-password">Transaction Password</label>
                <input type="password" id="transaction-password" placeholder="Your 6-digit password">
                <button class="button" onclick="requestWithdraw()">Request Withdrawal</button>
            </div>
        </div>
    </div>

    <div class="footer">
        <a href="#" class="nav-item active" onclick="showSection('home', this)">
            <img src="https://example.com/home-icon.png" alt="Home">
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('daily-earning', this)">
            <img src="https://example.com/daily-earning-icon.png" alt="Earning">
            <span>Earning</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('refer-earn', this)">
            <img src="https://example.com/refer-earn-icon.png" alt="Refer">
            <span>Refer</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('withdraw', this)">
            <img src="https://example.com/withdraw-icon.png" alt="Withdraw">
            <span>Withdraw</span>
        </a>
        <a href="#" class="nav-item" onclick="showSection('profile', this)">
            <img src="https://example.com/profile-icon.png" alt="Profile">
            <span>Profile</span>
        </a>
    </div>
</div>

<script>
    const GMAIL_RATE = 500;
    const INSTAGRAM_RATE = 300;
    const VIDEO_AD_RATE = 50; 
    const POPUP_AD_RATE = 40;
    const BANNER_AD_RATE = 30;
    const DAILY_CHECKIN_BDT = 50;
    const FB_FOLLOW_RATE = 30;
    const INSTA_JOIN_RATE = 25;
    const DAILY_CHECKIN_CODE = "TELEGRAM_CODE123";
    const FB_CODE = "FB123";
    const INSTA_CODE = "IG123";

    let balance = 0;
    let username = "";
    let nickname = "";
    let phoneNumber = "";
    let transactionPassword = "";
    let totalReferrals = 0;
    let adsWatched = 0;
    let accountsSold = 0;
    let taskEarnings = 0;

    // Monetag SDK-‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá Rewarded Interstitial ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function showAd1() {
        // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® zone ID (9726155) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
        if (typeof show_9726155 === 'function') {
            show_9726155().then(() => {
                // ‡¶è‡¶á ‡¶¨‡ßç‡¶≤‡¶ï‡¶ü‡¶ø ‡¶§‡¶ñ‡¶®‡¶á ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶Ø‡¶ñ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡¶¨‡ßá
                alert('You have seen an ad!');
                completeTask('ads1'); // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ads1 ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
            }).catch(e => {
                // ‡¶Ø‡¶¶‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º ‡¶¨‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßá
                alert('Ad was not displayed successfully. Please try again.');
            });
        } else {
            alert('Monetag SDK not loaded. Please try again or check your internet connection.');
        }
    }

    // Rewarded Popup ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Direct Link ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞
    function showAd2() {
        // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Rewarded Popup zone ID (9716500) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
        window.open('https://otieu.com/4/9716500', '_blank'); 
        setTimeout(() => {
            completeTask('ads2'); // 3 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡ßá‡¶¨‡ßá
        }, 3000);
    }

    // In-App Interstitial ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Direct Link ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞
    function showAd3() {
        // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Rewarded Interstitial zone ID (9716498) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
        window.open('https://otieu.com/4/9716498', '_blank');
        setTimeout(() => {
            completeTask('ads3'); // 3 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡ßá‡¶¨‡ßá
        }, 3000);
    }

    function loadData() {
        const userData = JSON.parse(localStorage.getItem('userData'));
        if (userData) {
            username = userData.username;
            nickname = userData.nickname;
            phoneNumber = userData.phoneNumber;
            transactionPassword = userData.transactionPassword;
            balance = userData.balance || 0;
            totalReferrals = userData.totalReferrals || 0;
            adsWatched = userData.adsWatched || 0;
            accountsSold = userData.accountsSold || 0;
            taskEarnings = userData.taskEarnings || 0;

            document.getElementById('registration-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            updateUI();
        } else {
            document.getElementById('registration-screen').style.display = 'flex';
            document.getElementById('main-app').style.display = 'none';
        }
    }

    function registerUser() {
        const regUsername = document.getElementById('reg-username').value;
        const regNickname = document.getElementById('reg-nickname').value;
        const regPhone = document.getElementById('reg-phone').value;
        const regPassword = document.getElementById('reg-password').value;

        if (regUsername === regNickname) {
            alert("Username and Nickname cannot be the same. Please choose a different nickname.");
            return;
        }
        if (regPhone.length !== 11 || isNaN(regPhone)) {
            alert("Phone Number must be an 11-digit number.");
            return;
        }
        if (regPassword.length !== 6 || isNaN(regPassword)) {
            alert("Transaction Password must be a 6-digit number.");
            return;
        }

        if (regUsername && regNickname && regPhone && regPassword) {
            const userData = {
                username: regUsername,
                nickname: regNickname,
                phoneNumber: regPhone,
                transactionPassword: regPassword,
                balance: 0,
                totalReferrals: 0,
                adsWatched: 0,
                accountsSold: 0,
                taskEarnings: 0
            };
            localStorage.setItem('userData', JSON.stringify(userData));
            loadData();
        } else {
            alert("Please fill in all the details.");
        }
    }
    
    function updateUI() {
        document.getElementById('welcome-nickname').textContent = nickname;
        document.getElementById('balanceDisplay').textContent = balance.toLocaleString() + ' BDT';
        
        document.getElementById('gmailRate').textContent = GMAIL_RATE + ' BDT';
        document.getElementById('instagramRate').textContent = INSTAGRAM_RATE + ' BDT';
        document.getElementById('adRate').textContent = VIDEO_AD_RATE + ' BDT';

        document.getElementById('ad1Rate').textContent = VIDEO_AD_RATE;
        document.getElementById('ad2Rate').textContent = POPUP_AD_RATE;
        document.getElementById('ad3Rate').textContent = BANNER_AD_RATE;

        document.getElementById('profileUsername').textContent = username;
        document.getElementById('profileNickname').textContent = nickname;
        document.getElementById('profilePhoneNumber').textContent = phoneNumber;
        document.getElementById('totalReferrals').textContent = totalReferrals;
        
        document.getElementById('adsWatchedCount').textContent = adsWatched;
        document.getElementById('accountsSoldCount').textContent = accountsSold;
        document.getElementById('taskEarnings').textContent = taskEarnings.toLocaleString() + ' BDT';

        document.getElementById('gmailSellRate').textContent = GMAIL_RATE + ' BDT';
        document.getElementById('instagramSellRate').textContent = INSTAGRAM_RATE + ' BDT';

        saveData();
    }

    function saveData() {
        const userData = {
            username,
            nickname,
            phoneNumber,
            transactionPassword,
            balance,
            totalReferrals,
            adsWatched,
            accountsSold,
            taskEarnings
        };
        localStorage.setItem('userData', JSON.stringify(userData));
    }

    function showSection(sectionId, element) {
        document.querySelectorAll('.content-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(sectionId).classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(nav => {
            nav.classList.remove('active');
        });
        if (element) {
            element.classList.add('active');
        }
    }

    function showSubSection(subId) {
        document.querySelectorAll('.content-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(subId).classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(nav => {
            nav.classList.remove('active');
        });
        
        const parentNav = document.querySelector(`.nav-item[onclick*="showSection('${getParentSection(subId)}')"]`);
        if (parentNav) {
            parentNav.classList.add('active');
        } else {
             const extraEarningNav = document.querySelector(`.nav-item[onclick*="showSection('extra-earning')"]`);
             if (extraEarningNav) extraEarningNav.classList.add('active');
        }
    }
    
    function getParentSection(subId) {
        if (subId.includes('page')) return 'settings';
        if (subId.includes('task') || subId.includes('sell')) return 'extra-earning';
        return '';
    }

    function submitWhatsApp() {
        const phone = document.getElementById('whatsapp-phone').value;
        if (phone.length !== 11 || isNaN(phone)) {
            alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡ßß‡ßß-‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§");
            return;
        }
        
        document.getElementById('whatsapp-message').textContent = `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ (${phone}) ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
        document.getElementById('whatsapp-message').style.display = 'block';
    }

    function submitGmail() {
        const count = document.getElementById('gmail-count').value;
        const file = document.getElementById('gmail-file').files[0];
        const sure = document.getElementById('password-sure').checked;

        if (count && file && sure) {
            document.getElementById('gmail-message').textContent = `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ${count}‡¶ü‡¶ø ‡¶ú‡¶ø‡¶Æ‡ßá‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
            document.getElementById('gmail-message').style.display = 'block';
            // You can add logic here to send the file to your server if you have one.
        } else {
            alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        }
    }

    function submitInstagram() {
        const count = document.getElementById('insta-count').value;
        const file = document.getElementById('insta-file').files[0];
        const sure = document.getElementById('insta-password-sure').checked;

        if (count && file && sure) {
            document.getElementById('instagram-message').textContent = `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ${count}‡¶ü‡¶ø ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
            document.getElementById('instagram-message').style.display = 'block';
        } else {
            alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
        }
    }

    function changeTransactionPassword() {
        const oldPassword = document.getElementById('old-password').value;
        const newPassword = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;

        if (oldPassword === transactionPassword) {
            if (newPassword === confirmPassword) {
                if (newPassword.length === 6 && !isNaN(newPassword)) {
                    transactionPassword = newPassword;
                    const userData = JSON.parse(localStorage.getItem('userData'));
                    userData.transactionPassword = newPassword;
                    localStorage.setItem('userData', JSON.stringify(userData));
                    alert("Transaction password changed successfully!");
                    document.getElementById('old-password').value = '';
                    document.getElementById('new-password').value = '';
                    document.getElementById('confirm-password').value = '';
                    showSection('settings');
                } else {
                    alert("New password must be a 6-digit number.");
                }
            } else {
                alert("New passwords do not match.");
            }
        } else {
            alert("Incorrect old password.");
        }
    }

    function dailyCheckin() {
        const userCode = prompt("Please enter the daily check-in code from our Telegram channel:");
        if (userCode === DAILY_CHECKIN_CODE) {
            balance += DAILY_CHECKIN_BDT;
            updateUI();
            alert(`You have received ${DAILY_CHECKIN_BDT} BDT for Daily Check-in!`);
        } else {
            alert("Invalid code. Please check our Telegram channel for the correct code.");
        }
    }
    
    function openExternalLink(url, taskName) {
        window.open(url, '_blank');
        
        setTimeout(() => {
            let code = '';
            if (taskName === 'facebook') {
                code = prompt("Please enter the special code from the Facebook page to complete the task:");
                if (code === FB_CODE) {
                    completeTask('facebook');
                } else {
                    alert("Incorrect code. Task not completed.");
                }
            } else if (taskName === 'instagram') {
                code = prompt("Please enter the special code from the Instagram page to complete the task:");
                if (code === INSTA_CODE) {
                    completeTask('instaJoin');
                } else {
                    alert("Incorrect code. Task not completed.");
                }
            }
        }, 3000);
    }

    function completeTask(taskName) {
        let bdt = 0;
        if (taskName === 'ads1') {
            bdt = VIDEO_AD_RATE;
            adsWatched++;
            taskEarnings += bdt;
            alert(`You watched a video ad and earned ${bdt} BDT.`);
        } else if (taskName === 'ads2') {
            bdt = POPUP_AD_RATE;
            adsWatched++;
            taskEarnings += bdt;
            alert(`You viewed a popup ad and earned ${bdt} BDT.`);
        } else if (taskName === 'ads3') {
            bdt = BANNER_AD_RATE;
            adsWatched++;
            taskEarnings += bdt;
            alert(`You viewed a banner ad and earned ${bdt} BDT.`);
        } else if (taskName === 'gmail') {
            bdt = GMAIL_RATE;
            accountsSold++;
            taskEarnings += bdt;
            alert(`You sold a Gmail account and earned ${bdt} BDT.`);
        } else if (taskName === 'whatsapp') {
            bdt = 200;
            taskEarnings += bdt;
            alert(`You connected your WhatsApp number and earned ${bdt} BDT.`);
        } else if (taskName === 'instagram') {
            bdt = INSTAGRAM_RATE;
            accountsSold++;
            taskEarnings += bdt;
            alert(`You sold an Instagram account and earned ${bdt} BDT.`);
        } else if (taskName === 'facebook') {
            bdt = FB_FOLLOW_RATE;
            taskEarnings += bdt;
            alert(`You followed on Facebook and earned ${bdt} BDT.`);
        } else if (taskName === 'instaJoin') {
            bdt = INSTA_JOIN_RATE;
            taskEarnings += bdt;
            alert(`You followed on Instagram and earned ${bdt} BDT.`);
        }
        balance += bdt;
        updateUI();
    }
    
    function requestWithdraw() {
        const amount = document.getElementById('amount').value;
        const method = document.getElementById('method').value;
        const account = document.getElementById('account').value;
        const password = document.getElementById('transaction-password').value;

        if (amount && method && account && password) {
            if (transactionPassword !== password) {
                alert("Invalid transaction password.");
                return;
            }
            if (parseInt(amount) > balance) {
                alert("Not enough BDT to withdraw.");
                return;
            }
            balance -= parseInt(amount);
            updateUI();
            alert(`Withdrawal request for ${amount} BDT via ${method} to ${account} has been submitted.`);
        } else {
            alert("Please fill in all the details.");
        }
    }

    function copyLink() {
        const referralLink = document.getElementById('referralLink');
        navigator.clipboard.writeText(referralLink.textContent)
            .then(() => alert('Referral link copied to clipboard!'))
            .catch(err => console.error('Failed to copy text: ', err));
    }

    document.addEventListener('DOMContentLoaded', loadData);
</script>

</body>
</html>
